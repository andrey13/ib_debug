1)  для всех файлов протоколов *.txt выполнить:

    1.1) найти по name=$compname или добавить запись в таблице COMP, id -> $id_comp

    1.2) если возможно, определить СОНО ($sono) по имени файла, иначе $sono=""

    1.3) для текущего компьютера установить дату последнего сканирования:
         script_last_datetime = $file_datetime
         script_ok_datetime   = $file_datetime
         file_size            = $file_size
         sono                 = $sono

    1.4) для всех записей таблицы COMP_SOFT, где id_comp=$id_comp и on_off='1' установить:
         on_off = '0'
         upd_dt = $file_datetime
         sono   = $sono

    1.5) для каждой программы ($softname) данного компьютера выполнить:

        1.5.1) найти или добавить запись name=$softname в таблице SOFT id -> $id_soft

        1.5.2) найти или добавить запись в таблице COMP_SOFT 
               id_comp = $id_comp
               id_soft = $id_soft
               on_off  = '1'
               upd_dt  = $file_datetime
               sono    = $sono

    1.6) удалить файл протокола

2) если хотя бы один файл протокола не совпадает со своей старой версией - выполнить перерасчеты:

    2.1) перерасчет количества запрещенных программ для каждой рабочей станции
         (в расчете учитываются записи таблицы COMP_SOFT с полем on_off='1')

    2.2) для каждой программы, перасчет количество компьютеров, на которых она установлена
         (в расчете учитываются записи таблицы COMP_SOFT с полем on_off='1')

    2.3) перерасчетать статистику сканирования